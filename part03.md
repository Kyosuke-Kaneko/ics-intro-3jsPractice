# カメラの座標制御
Three.jsは3D空間内でカメラ（視点）を自由に移動・回転できます。これを習得することで3Dの表現力が格段に高まりますので、カメラの動かし方を3分類に分け、順を追って説明します。

 - 自動回転型
 - マウスの位置連動型
 - マウスのドラッグ＆ドロップ型

 ## 自動回転型
 サンプルでは地球を中心として**カメラが円周上を自動的に移動**します。カメラの位置の設定はcameraオブジェクトのpositionプロパティーに数値を代入します。

 ```js
 // ラジアンに変換する
const radian = rot * Math.PI / 180;
// 角度に応じてカメラの位置を設定
camera.position.x = 1000 * Math.sin(radian);
camera.position.z = 1000 * Math.cos(radian);
 ```

カメラは常に中央を見るようにしておきたいので、cameraオブジェクトのlookAt()メソッドを使って原点座標(0, 0, 0)を指定しています。lookAt()メソッドはどの位置からでも指定した座標に強制的に向かせることができる命令です。

```js
// 原点方向を見つめる
camera.lookAt(new THREE.Vector3(0, 0, 0));
```
動きの演出については、フレーム毎に衛星の配置角度を0.5度ずつ加算し、それをカメラの座標に変換しています。カメラの座標は三角関数（sinとcos）を使って、角度から求めています。1000という値は円の半径です。

```js
view.camera.x = 円周の半径 * Math.sin(角度 * Math.PI / 180);
view.camera.z = 円周の半径 * Math.cos(角度 * Math.PI / 180);
```

## マウスの位置連動型
このサンプルでは地球を中心として、マウスの横の移動に対してカメラが移動します。<br>
角度の算出方法をステージの幅の何％の位置にマウスがあるかを計算で求め、それを角度に反映しているところです。

```js
// マウスの位置に応じて角度を設定
// マウスのX座標がステージの幅の何%の位置にあるか調べてそれを360度で乗算する
const targetRot = (mouseX / window.innerWidth) * 360;
```

### イージングの公式
Easing(イージング)とは、エフェクトの動きを加速/減速させる、直線的でない滑らかな動きを付与したもの.<br>
例えばフェードアウトの動きを考えたとき、通常は透明度の変化量は経過時間に対して線形です。全体で1秒かかって消える処理であれば、0.5秒経過時の透明度は0.5になります。

現在の値 += (目標値 - 現在の値) * イージング係数

滑らかなエフェクトのために変化量を更新し続ける処理